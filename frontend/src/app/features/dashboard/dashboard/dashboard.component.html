<app-main-layout [pageTitle]="'Fraud Detection Dashboard'">
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-white shadow rounded-lg p-6">
      <p class="text-sm font-medium text-gray-500">Transactions Today</p>
      <p class="text-3xl font-semibold text-gray-800">{{ transactionsToday }}</p>
    </div>
    <a routerLink="/high-risk-alerts" class="bg-white shadow rounded-lg p-6 block hover:bg-red-50 transition-colors">
      <p class="text-sm font-medium text-gray-500">High-Risk Alerts</p>
      <p class="text-3xl font-semibold text-red-600">{{ fraudAlerts }}</p>
    </a>
    <a routerLink="/simulator" class="bg-white shadow rounded-lg p-6 block hover:bg-blue-50 transition-colors">
      <p class="text-sm font-medium text-gray-500">POS Simulator</p>
      <p class="text-xl font-semibold text-blue-600">Test Transactions &rarr;</p>
    </a>
  </div>

  <div class="shadow rounded-lg" [style.backgroundColor]="'white'">
    <h2 class="text-lg font-semibold p-6 border-b border-gray-200">Live Transaction Feed</h2>
    <div id="feed">
      <div *ngFor="let transaction of transactions"
        class="flex justify-between items-center p-4 border-b border-gray-200 last:border-b-0 hover:bg-gray-50">
        <a [routerLink]="['/transaction', transaction.id]" class="flex-grow flex justify-between items-center">
          <div>
            <strong class="font-medium text-gray-800">{{ transaction.ccNum }}</strong>
            <small class="block text-gray-500 text-sm">{{ transaction.amount | currency }} &bull; {{ transaction.category
              }} &bull; {{ transaction.timestamp | date:'short' }}</small>
          </div>
          <span class="px-3 py-1 text-xs font-medium rounded-full" [ngClass]="{
                  'bg-red-100 text-red-800': getRiskLevel(transaction.riskScore) === 'HIGH',
                  'bg-yellow-100 text-yellow-800': getRiskLevel(transaction.riskScore) === 'MEDIUM',
                  'bg-green-100 text-green-800': getRiskLevel(transaction.riskScore) === 'LOW'
                }">
            {{ getRiskLevel(transaction.riskScore) }} RISK
          </span>
        </a>
      </div>
    </div>
  </div>
</app-main-layout>
